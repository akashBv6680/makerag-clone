<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MakeRAG - AI Chat & Search</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.container{max-width:500px;width:100%;background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);overflow:hidden}.header{background:#333;padding:20px;text-align:center;color:white;font-size:24px;font-weight:bold}h2{margin-top:0;font-size:28px;color:#333}p{color:#666;margin:10px 0;font-size:14px}.nav{display:flex;gap:10px;background:#f5f5f5;padding:15px;border-bottom:1px solid #ddd}.nav button{flex:1;padding:10px;border:none;border-radius:5px;background:white;cursor:pointer;font-weight:600;transition:all 0.3s}.nav button.active{background:#667eea;color:white}.form{display:none;padding:30px}.form.show{display:block}.form-group{margin-bottom:20px}.form-group label{display:block;font-weight:600;margin-bottom:8px;color:#333}.form-group input{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;font-size:16px;transition:all 0.3s}.form-group input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,0.1)}.btn{width:100%;padding:12px;background:#667eea;color:white;border:none;border-radius:5px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s;margin-top:10px}.btn:hover{background:#764ba2;transform:translateY(-2px)}.btn:disabled{opacity:0.6;cursor:not-allowed}.alert{padding:15px;border-radius:5px;margin-bottom:20px;display:none;font-weight:600}.alert.show{display:block}.alert.error{background:#fee;color:#c33;border-left:4px solid #c33}.alert.success{background:#efe;color:#3c3;border-left:4px solid #3c3}.alert.warning{background:#ffd700;color:#333;border-left:4px solid #ffa500}.dashboard{display:none;padding:30px}.dashboard.show{display:block}.stats{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px}.stat-card{background:#f5f5f5;padding:20px;border-radius:10px;text-align:center;border:2px solid #ddd}.stat-number{font-size:32px;font-weight:bold;color:#667eea}.stat-label{color:#666;margin-top:10px;font-size:14px}.chat{border:1px solid #ddd;border-radius:10px;overflow:hidden;display:flex;flex-direction:column;height:400px}.messages{flex:1;padding:20px;overflow-y:auto;background:#f9f9f9;border-bottom:1px solid #ddd}.msg{margin-bottom:15px;padding:12px;border-radius:8px;max-width:80%;word-wrap:break-word}.msg.user{background:#667eea;color:white;margin-left:auto}.msg.ai{background:#e9e9e9;color:#333}.input-area{display:flex;gap:10px;padding:15px;background:white}.input-area input{flex:1;padding:10px;border:1px solid #ddd;border-radius:5px}.loading{text-align:center;padding:20px}.spinner{display:inline-block;width:20px;height:20px;border:3px solid #f3f3f3;border-top:3px solid #667eea;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style></head><body><div class="container"><div class="header">‚ö° MakeRAG - AI Chat</div><div class="nav"><button class="nav-btn active" onclick="showForm('login')">Login</button><button class="nav-btn" onclick="showForm('register')">Sign Up</button><button class="nav-btn" onclick="logout()" style="margin-left:auto;">Logout</button></div><div class="main" style="padding:0"><div id="alert" class="alert"></div><form class="form show" id="loginForm" onsubmit="handleLogin(event)"><h2>Welcome Back</h2><div class="form-group"><label>Email</label><input type="email" id="loginEmail" required></div><div class="form-group"><label>Password</label><input type="password" id="loginPassword" required></div><button type="submit" class="btn">Sign In</button></form><form class="form" id="registerForm" onsubmit="handleRegister(event)"><h2>Create Account</h2><div class="form-group"><label>Name</label><input type="text" id="registerName" required></div><div class="form-group"><label>Email</label><input type="email" id="registerEmail" required></div><div class="form-group"><label>Password</label><input type="password" id="registerPassword" required></div><button type="submit" class="btn">Create Account</button></form><div id="dashboard" class="dashboard"><h2>üìä Dashboard</h2><div class="stats"><div class="stat-card"><div class="stat-number" id="docCount">0</div><div class="stat-label">Documents</div></div><div class="stat-card"><div class="stat-number" id="chatCount">0</div><div class="stat-label">Chats</div></div></div><h2>üí¨ Chat</h2><div class="chat"><div class="messages" id="messages"></div><div class="input-area"><input type="text" id="msgInput" placeholder="Ask me anything..."><button class="btn" style="flex:0;width:80px;margin:0;padding:10px" onclick="sendMsg()">Send</button></div></div></div></div></div><script>const API='https://makerag-clone.onrender.com';let token=localStorage.getItem('token');function showAlert(msg,type){const a=document.getElementById('alert');a.textContent=msg;a.className=`alert show ${type}`;setTimeout(()=>a.classList.remove('show'),5000)}function showForm(f){document.querySelectorAll('.form').forEach(x=>x.classList.remove('show'));document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('active'));document.getElementById(f+'Form').classList.add('show');event.target.classList.add('active')}async function handleLogin(e){e.preventDefault();const email=document.getElementById('loginEmail').value;const pwd=document.getElementById('loginPassword').value;try{showAlert('Logging in...','warning');const r=await fetch(`${API}/api/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password:pwd})});if(!r.ok) throw new Error(`HTTP ${r.status}`);const d=await r.json();if(d.access_token){token=d.access_token;localStorage.setItem('token',token);showAlert('‚úÖ Login successful!','success');setTimeout(()=>showDash(),500)}else{showAlert('‚ùå '+(d.detail||'Login failed'),'error')}}catch(err){showAlert('‚ùå Error: '+err.message,'error');console.error('Login error:',err)}}async function handleRegister(e){e.preventDefault();const name=document.getElementById('registerName').value;const email=document.getElementById('registerEmail').value;const pwd=document.getElementById('registerPassword').value;try{showAlert('Creating account...','warning');const r=await fetch(`${API}/api/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password:pwd})});if(!r.ok) throw new Error(`HTTP ${r.status}`);const d=await r.json();if(d.access_token){token=d.access_token;localStorage.setItem('token',token);showAlert('‚úÖ Account created!','success');setTimeout(()=>showDash(),500)}else{showAlert('‚ùå '+(d.detail||'Registration failed'),'error')}}catch(err){showAlert('‚ùå Error: '+err.message,'error');console.error('Register error:',err)}}function showDash(){document.querySelectorAll('.form').forEach(x=>x.classList.remove('show'));document.getElementById('dashboard').classList.add('show');loadStats()}async function loadStats(){try{const r=await fetch(`${API}/api/stats`,{headers:{'Authorization':`Bearer ${token}`}});if(!r.ok) throw new Error(`HTTP ${r.status}`);const d=await r.json();document.getElementById('docCount').textContent=d.total_documents||0;document.getElementById('chatCount').textContent=d.total_chats||0}catch(err){console.error('Stats error:',err)}}async function sendMsg(){const inp=document.getElementById('msgInput');const msg=inp.value.trim();if(!msg) return;const m=document.getElementById('messages');const div=document.createElement('div');div.className='msg user';div.textContent=msg;m.appendChild(div);m.scrollTop=m.scrollHeight;try{const r=await fetch(`${API}/api/chat`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({message:msg})});if(!r.ok) throw new Error(`HTTP ${r.status}`);const d=await r.json();const div2=document.createElement('div');div2.className='msg ai';div2.textContent=d.response||'No response';m.appendChild(div2);m.scrollTop=m.scrollHeight}catch(err){const div3=document.createElement('div');div3.className='msg ai';div3.textContent='‚ùå Error: '+err.message;m.appendChild(div3);console.error('Chat error:',err)}inp.value=''}function logout(){token=null;localStorage.removeItem('token');document.getElementById('dashboard').classList.remove('show');document.getElementById('loginForm').classList.add('show');showAlert('‚úÖ Logged out','success')}if(token){showDash()}console.log('MakeRAG Client Loaded - API:',API)</script></body></html>
